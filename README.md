# dump-vk-group
Скрипт для создания дампа группы вк (организованная, сортированная копия всех материалов со стены).
Создавался для личных целей, умеет не всё, имеет несовершенства, возможно потребует доработки для каких-то задач. Тем не менее, может быть использован как готовая основа.
 
Сохраняет тексты, аудио (в обход блокировки API) и картинки (включая картинки-документы: GIF и жпеги без сжатия).
Не включает репосты, не умеет обрабатывать новые "альбомы на стене", игнорирует видео, объекты-ссылки и всё прочее.

Создаёт директорию с ID группы вместо имени и следующей структурой:
```
- wall.txt
- attachments/
    |> audio/
    |> photo/
```

* **wall.txt** — JSON объект, содержащий некоторые метаданные постов в следующем формате:
```json
"id_поста": {
  'unix_date': "дата поста в формате unixtime",
  'from': "автор (для большинства групп её собственный ID)",
  'text': "текст поста",
  'likes': "количество лайков",
  'reposts': "количество репостов",
  'views': "количество просмотров"
}
```
* audio, photo — содержат директории, соответствующие ID поста, вложения к которому они содержат.
Например, в wall.txt есть данные о посте с ID 3, тогда в attachments/audio/3/ есть mp3 файлы, которые были приложены к посту.
Если в посте не было вложений такого типа, то папки не будет.

## Установка
Зависимости можно установить так:
```
pip install vk_api vkaudiotoken
```

## Использование
В директории со скриптом main.py создайте файл config.txt и внесите три строчки с логином от вк, паролем и ID нужной группы (соблюдая очерёдность), например так:
```
+78005553535
password
1
```
Если группа закрытая или частная, то необходимо, чтобы аккаунт, данные которого вы предоставляете, имел к ней доступ (членства хватит)

Теперь запустите:
```
python main.py
```
Скрипт будет кратко сообщать, что он делает в данный момент.

Обратите внимание, что дампер создавался в linux и в нескольких местах полагается на средства *nix систем. Для работы в Windows, вероятно, придётся кое-что поправить (например, сделать реализацию загрузок в save_audio и save_photo нативными средствами языка, по аналогии с save_docs)

## Contribution и использование кода
Pull requests с доработками принимаются

Репозиторий распространяется по GNU GPLv3, можно свободно использовать его
для построения других проектов, например более функционального дампера